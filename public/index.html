<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Sentences App</title>
  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <h1>Sentences App</h1>

  <form id="create-form">
    <label for="category">Category:</label>
    <input type="text" id="category" name="category" required>

    <label for="text">Text:</label>
    <textarea id="text" name="text" required></textarea>

    <label for="skills">Skills:</label>
    <input type="text" id="skills" name="skills" required>

    <input type="submit" value="Create Sentence">
  </form>

  <table id="sentences-table">
    <thead>
      <tr>
        <th>Category</th>
        <th>Text</th>
        <th>Skills</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Sentences will be dynamically added here -->
    </tbody>
  </table>

  <script>
    // Fetch sentences from the API and populate the table
    function fetchSentences() {
      const headers = new Headers();
      headers.append('Cookie', btoa('your-cookie-value'));

      fetch('http://localhost:3000/api/sentences?order=asc&offset=1&lmt=3', {
        headers: headers
      })
        .then(response => response.json())
        .then(sentences => {
          const tableBody = document.querySelector('#sentences-table tbody');
          tableBody.innerHTML = '';

          sentences.forEach(sentence => {
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${sentence.category}</td>
              <td>${sentence.text}</td>
              <td>${sentence.skills}</td>
              <td class="actions">
                <button onclick="deleteSentence(${sentence.id})">Delete</button>
                <button onclick="updateSentence(${sentence.id})">Update</button>
              </td>
            `;
            tableBody.appendChild(row);
          });
        })
        .catch(error => {
          console.error('Error fetching sentences:', error);
        });
    }

    // Create a new sentence
    function createSentence(event) {
      event.preventDefault();

      const category = document.querySelector('#category').value;
      const text = document.querySelector('#text').value;
      const skills = document.querySelector('#skills').value;

      const sentence = {
        category,
        text,
        skills
      };

      fetch('http://localhost:3000/api/sentences', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(sentence)
      })
        .then(() => {
          document.querySelector('#category').value = '';
          document.querySelector('#text').value = '';
          document.querySelector('#skills').value = '';
          fetchSentences();
        })
        .catch(error => {
          console.error('Error creating sentence:', error);
        });
    }

    // Delete a sentence
    function deleteSentence(sentenceId) {
      if (confirm('Are you sure you want to delete this sentence?')) {
        fetch(`http://localhost:3000/api/sentences/${sentenceId}`, {
          method: 'DELETE'
        })
          .then(() => {
            fetchSentences();
          })
          .catch(error => {
            console.error('Error deleting sentence:', error);
          });
      }
    }

    // Update a sentence
    function updateSentence(sentenceId) {
      // Replace this function with your own implementation of sentence update logic
      alert(`Update sentence with ID: ${sentenceId}`);
    }

    // Event listener for form submission
    document.querySelector('#create-form').addEventListener('submit', createSentence);

    // Initial fetch to populate the table
    fetchSentences();
  </script>
</body>

</html>